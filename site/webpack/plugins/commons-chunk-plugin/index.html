<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="demun blog"><link rel="canonical" href="https://demun.github.io/webpack/plugins/commons-chunk-plugin/"><meta name="author" content="demun"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\-]+"><link rel="shortcut icon" href="../../../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>CommonsChunkPlugin</title><link rel="stylesheet" href="../../../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css"><meta name="theme-color" content="#3f51b5"><script src="../../../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=맑은고딕:300,400,400i,700|맑은고딕&display=swap"><style>body,input{font-family:"맑은고딕","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"맑은고딕","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../../../assets/fonts/material-icons.css"><link rel="stylesheet" href="../../../assets/stylesheets/extra.css"><script>window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-XXXXXXXX-X", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#options" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://demun.github.io/" title="demun.github.io" class="md-header-nav__button md-logo"><i class="md-icon"></i></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">demun.github.io</span><span class="md-header-nav__topic">CommonsChunkPlugin</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/demun/demun.github.io" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">demun/demun.github.io</div></a></div></div></div></nav></header><div class="md-container"><nav class="md-tabs" data-md-component="tabs"><div class="md-tabs__inner md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="../../.." title="홈" class="md-tabs__link md-tabs__link--active">홈</a></li><li class="md-tabs__item"><a href="../../../publisher-report/" title="Publisher report" class="md-tabs__link">Publisher report</a></li><li class="md-tabs__item"><a href="../../../vscode/" title="Visual Studio Code" class="md-tabs__link">Visual Studio Code</a></li><li class="md-tabs__item"><a href="../../../mkdocs/" title="MkDocs" class="md-tabs__link">MkDocs</a></li><li class="md-tabs__item"><a href="../../../material-theme/" title="MkDocs Material" class="md-tabs__link">MkDocs Material</a></li><li class="md-tabs__item"><a href="../../guides/getting-started/" title="Webpack" class="md-tabs__link">Webpack</a></li></ul></div></nav><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://demun.github.io/" title="demun.github.io" class="md-nav__button md-logo"><i class="md-icon"></i></a>demun.github.io</label><div class="md-nav__source"><a href="https://github.com/demun/demun.github.io" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">demun/demun.github.io</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../.." title="홈" class="md-nav__link">홈</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2"><label class="md-nav__link" for="nav-2">Publisher report</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">Publisher report</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../../publisher-report/" title="HTML소개" class="md-nav__link">HTML소개</a></li><li class="md-nav__item"><a href="../../../publisher-report/00_default/" title="HTML기본" class="md-nav__link">HTML기본</a></li><li class="md-nav__item"><a href="../../../publisher-report/01_html/" title="HTML만들기" class="md-nav__link">HTML만들기</a></li><li class="md-nav__item"><a href="../../../publisher-report/02_p/" title="단락,블럭,주석" class="md-nav__link">단락,블럭,주석</a></li><li class="md-nav__item"><a href="../../../publisher-report/03_a/" title="링크,이미지" class="md-nav__link">링크,이미지</a></li><li class="md-nav__item"><a href="../../../publisher-report/04_list/" title="리스트" class="md-nav__link">리스트</a></li><li class="md-nav__item"><a href="../../../publisher-report/05_table/" title="표" class="md-nav__link">표</a></li><li class="md-nav__item"><a href="../../../publisher-report/06_html5/" title="HTML5" class="md-nav__link">HTML5</a></li><li class="md-nav__item"><a href="../../../publisher-report/07_css/" title="CSS소개" class="md-nav__link">CSS소개</a></li><li class="md-nav__item"><a href="../../../publisher-report/08_color/" title="색상,배경,테두리" class="md-nav__link">색상,배경,테두리</a></li><li class="md-nav__item"><a href="../../../publisher-report/09_padding/" title="여백,높이" class="md-nav__link">여백,높이</a></li><li class="md-nav__item"><a href="../../../publisher-report/10_box/" title="박스모델" class="md-nav__link">박스모델</a></li><li class="md-nav__item"><a href="../../../publisher-report/11_text/" title="텍스트" class="md-nav__link">텍스트</a></li><li class="md-nav__item"><a href="../../../publisher-report/12_list/" title="목록,표" class="md-nav__link">목록,표</a></li><li class="md-nav__item"><a href="../../../publisher-report/13_display/" title="디스플레이" class="md-nav__link">디스플레이</a></li><li class="md-nav__item"><a href="../../../publisher-report/14_overflow/" title="오버플로우" class="md-nav__link">오버플로우</a></li><li class="md-nav__item"><a href="../../../publisher-report/15_radius/" title="둥근테두리" class="md-nav__link">둥근테두리</a></li><li class="md-nav__item"><a href="../../../publisher-report/16_gradient/" title="그라디언트" class="md-nav__link">그라디언트</a></li><li class="md-nav__item"><a href="../../../publisher-report/17_text/" title="텍스트효과" class="md-nav__link">텍스트효과</a></li><li class="md-nav__item"><a href="../../../publisher-report/18_shadow/" title="그림자" class="md-nav__link">그림자</a></li><li class="md-nav__item"><a href="../../../publisher-report/19_webfont/" title="웹글꼴" class="md-nav__link">웹글꼴</a></li><li class="md-nav__item"><a href="../../../publisher-report/20_viewport/" title="뷰포트" class="md-nav__link">뷰포트</a></li><li class="md-nav__item"><a href="../../../publisher-report/21_fixed/" title="레이아웃 고정형" class="md-nav__link">레이아웃 고정형</a></li><li class="md-nav__item"><a href="../../../publisher-report/22_flow/" title="레이아웃 유동형" class="md-nav__link">레이아웃 유동형</a></li><li class="md-nav__item"><a href="../../../publisher-report/23_response/" title="레이아웃 반응형" class="md-nav__link">레이아웃 반응형</a></li><li class="md-nav__item"><a href="../../../publisher-report/24_exam/" title="호환성 보기 설정" class="md-nav__link">호환성 보기 설정</a></li><li class="md-nav__item"><a href="../../../publisher-report/25_exam/" title="개발자 도구 확인" class="md-nav__link">개발자 도구 확인</a></li><li class="md-nav__item"><a href="../../../publisher-report/26_exam/" title="QR코드 생성" class="md-nav__link">QR코드 생성</a></li><li class="md-nav__item"><a href="../../../publisher-report/27_exam/" title="모바일 검수" class="md-nav__link">모바일 검수</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"><label class="md-nav__link" for="nav-3">Visual Studio Code</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">Visual Studio Code</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../../vscode/" title="소개" class="md-nav__link">소개</a></li><li class="md-nav__item"><a href="../../../vscode/shortcuts/" title="단축키" class="md-nav__link">단축키</a></li><li class="md-nav__item"><a href="../../../vscode/git/" title="Git" class="md-nav__link">Git</a></li><li class="md-nav__item"><a href="../../../vscode/debug/" title="Debug" class="md-nav__link">Debug</a></li><li class="md-nav__item"><a href="../../../vscode/task/" title="Task" class="md-nav__link">Task</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"><label class="md-nav__link" for="nav-4">MkDocs</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">MkDocs</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../../mkdocs/" title="소개" class="md-nav__link">소개</a></li><li class="md-nav__item"><a href="../../../mkdocs/how/" title="사용법" class="md-nav__link">사용법</a></li><li class="md-nav__item"><a href="../../../mkdocs/theme/" title="테마" class="md-nav__link">테마</a></li><li class="md-nav__item"><a href="../../../mkdocs/tree/" title="구조" class="md-nav__link">구조</a></li><li class="md-nav__item"><a href="../../../mkdocs/others/" title="기타" class="md-nav__link">기타</a></li><li class="md-nav__item"><a href="../../../mkdocs/admonition/" title="Admonition" class="md-nav__link">Admonition</a></li><li class="md-nav__item"><a href="../../../mkdocs/publish/" title="배포" class="md-nav__link">배포</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5"><label class="md-nav__link" for="nav-5">MkDocs Material</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">MkDocs Material</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../../material-theme/" title="Material" class="md-nav__link">Material</a></li><li class="md-nav__item"><a href="../../../material-theme/getting-started/" title="Getting started" class="md-nav__link">Getting started</a></li><li class="md-nav__item"><a href="../../../material-theme/specimen/" title="Specimen" class="md-nav__link">Specimen</a></li><li class="md-nav__item"><a href="../../../material-theme/customization/" title="Customization" class="md-nav__link">Customization</a></li><li class="md-nav__item"><a href="../../../material-theme/compliance/" title="Compliance with GDPR" class="md-nav__link">Compliance with GDPR</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/admonition/" title="Admonition" class="md-nav__link">Admonition</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/codehilite/" title="CodeHilite" class="md-nav__link">CodeHilite</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/footnotes/" title="Footnotes" class="md-nav__link">Footnotes</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/metadata/" title="Metadata" class="md-nav__link">Metadata</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/permalinks/" title="Permalinks" class="md-nav__link">Permalinks</a></li><li class="md-nav__item"><a href="../../../material-theme/extensions/pymdown/" title="PyMdown" class="md-nav__link">PyMdown</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6"><label class="md-nav__link" for="nav-6">Webpack</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">Webpack</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../guides/getting-started/" title="Getting Started" class="md-nav__link">Getting Started</a></li><li class="md-nav__item"><a href="../../guides/asset-management/" title="Asset Management" class="md-nav__link">Asset Management</a></li><li class="md-nav__item"><a href="../../guides/development/" title="Development" class="md-nav__link">Development</a></li><li class="md-nav__item"><a href="../../guides/code-splitting/" title="Code Spliting" class="md-nav__link">Code Spliting</a></li><li class="md-nav__item"><a href="../../guides/caching/" title="Caching" class="md-nav__link">Caching</a></li><li class="md-nav__item"><a href="../../guides/author-libraries/" title="Authoring Libraries" class="md-nav__link">Authoring Libraries</a></li><li class="md-nav__item"><a href="../../guides/environment-variables/" title="Environment Variables" class="md-nav__link">Environment Variables</a></li><li class="md-nav__item"><a href="../../guides/build-performance/" title="Build Performance" class="md-nav__link">Build Performance</a></li><li class="md-nav__item"><a href="../../guides/csp/" title="Content Security Policies" class="md-nav__link">Content Security Policies</a></li><li class="md-nav__item"><a href="../../guides/development-vagrant/" title="Development - Vagrant" class="md-nav__link">Development - Vagrant</a></li><li class="md-nav__item"><a href="../../guides/installation/" title="Installation" class="md-nav__link">Installation</a></li><li class="md-nav__item"><a href="../../guides/scaffolding/" title="Scaffolding" class="md-nav__link">Scaffolding</a></li><li class="md-nav__item"><a href="../../guides/output-management/" title="Output Management" class="md-nav__link">Output Management</a></li><li class="md-nav__item"><a href="../../guides/hot-module-replacement/" title="Hot Module Replacement" class="md-nav__link">Hot Module Replacement</a></li><li class="md-nav__item"><a href="../../guides/tree-shaking/" title="Tree Shaking" class="md-nav__link">Tree Shaking</a></li><li class="md-nav__item"><a href="../../guides/production/" title="Production" class="md-nav__link">Production</a></li><li class="md-nav__item"><a href="../../guides/lazy-loading/" title="Lazy Loading" class="md-nav__link">Lazy Loading</a></li><li class="md-nav__item"><a href="../../guides/shimming/" title="Shimming" class="md-nav__link">Shimming</a></li><li class="md-nav__item"><a href="../../guides/typescript/" title="TypeScript" class="md-nav__link">TypeScript</a></li><li class="md-nav__item"><a href="../../guides/progressive-web-application/" title="Progressive Web Application" class="md-nav__link">Progressive Web Application</a></li><li class="md-nav__item"><a href="../../guides/public-path/" title="Public Path" class="md-nav__link">Public Path</a></li><li class="md-nav__item"><a href="../../guides/integrations/" title="Integrations" class="md-nav__link">Integrations</a></li><li class="md-nav__item"><a href="../../concepts/" title="Concepts" class="md-nav__link">Concepts</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#options" title="Options" class="md-nav__link">Options</a></li><li class="md-nav__item"><a href="#examples" title="Examples" class="md-nav__link">Examples</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#commons-chunk-for-entries" title="Commons chunk for entries" class="md-nav__link">Commons chunk for entries</a></li><li class="md-nav__item"><a href="#explicit-vendor-chunk" title="Explicit vendor chunk" class="md-nav__link">Explicit vendor chunk</a></li><li class="md-nav__item"><a href="#move-common-modules-into-the-parent-chunk" title="Move common modules into the parent chunk" class="md-nav__link">Move common modules into the parent chunk</a></li><li class="md-nav__item"><a href="#extra-async-commons-chunk" title="Extra async commons chunk" class="md-nav__link">Extra async commons chunk</a></li><li class="md-nav__item"><a href="#passing-the-minchunks-property-a-function" title="Passing the minChunks property a function" class="md-nav__link">Passing the minChunks property a function</a></li></ul></nav></li><li class="md-nav__item"><a href="#manifest-file" title="Manifest file" class="md-nav__link">Manifest file</a></li><li class="md-nav__item"><a href="#combining-implicit-common-vendor-chunks-and-manifest-file" title="Combining implicit common vendor chunks and manifest file" class="md-nav__link">Combining implicit common vendor chunks and manifest file</a></li><li class="md-nav__item"><a href="#more-examples" title="More Examples" class="md-nav__link">More Examples</a></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><h1>CommonsChunkPlugin</h1><p>The <code>CommonsChunkPlugin</code> is an opt-in feature that creates a separate file (known as a chunk), consisting of common modules shared between multiple entry points.</p>
<p>W&gt; The CommonsChunkPlugin has been removed in webpack v4 legato. To learn how chunks are treated in the latest version, check out the <a href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a>.</p>
<p>By separating common modules from bundles, the resulting chunked file can be loaded once initially, and stored in cache for later use. This results in page speed optimizations as the browser can quickly serve the shared code from cache, rather than being forced to load a larger bundle whenever a new page is visited.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>

<h2 id="options">Options<a class="headerlink" href="#options" title="Permanent link">&para;</a></h2>
<!-- eslint-skip -->

<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">,</span> <span class="c1">// or</span>
  <span class="nx">names</span><span class="o">:</span> <span class="nx">string</span><span class="p">[],</span>
  <span class="c1">// The chunk name of the commons chunk. An existing chunk can be selected by passing a name of an existing chunk.</span>
  <span class="c1">// If an array of strings is passed this is equal to invoking the plugin multiple times for each chunk name.</span>
  <span class="c1">// If omitted and `options.async` or `options.children` is set all chunks are used, otherwise `options.filename`</span>
  <span class="c1">// is used as chunk name.</span>
  <span class="c1">// When using `options.async` to create common chunks from other async chunks you must specify an entry-point</span>
  <span class="c1">// chunk name here instead of omitting the `option.name`.</span>

  <span class="nx">filename</span><span class="o">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="c1">// The filename template for the commons chunk. Can contain the same placeholders as `output.filename`.</span>
  <span class="c1">// If omitted the original filename is not modified (usually `output.filename` or `output.chunkFilename`).</span>
  <span class="c1">// This option is not permitted if you&#39;re using `options.async` as well, see below for more details.</span>

  <span class="nx">minChunks</span><span class="o">:</span> <span class="nx">number</span><span class="o">|</span><span class="kc">Infinity</span><span class="o">|</span><span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="kr">boolean</span><span class="p">,</span>
  <span class="c1">// The minimum number of chunks which need to contain a module before it&#39;s moved into the commons chunk.</span>
  <span class="c1">// The number must be greater than or equal 2 and lower than or equal to the number of chunks.</span>
  <span class="c1">// Passing `Infinity` just creates the commons chunk, but moves no modules into it.</span>
  <span class="c1">// By providing a `function` you can add custom logic. (Defaults to the number of chunks)</span>

  <span class="nx">chunks</span><span class="o">:</span> <span class="nx">string</span><span class="p">[],</span>
  <span class="c1">// Select the source chunks by chunk names. The chunk must be a child of the commons chunk.</span>
  <span class="c1">// If omitted all entry chunks are selected.</span>

  <span class="nx">children</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">,</span>
  <span class="c1">// If `true` all children of the commons chunk are selected</span>

  <span class="nx">deepChildren</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">,</span>
  <span class="c1">// If `true` all descendants of the commons chunk are selected</span>

  <span class="nx">async</span><span class="o">:</span> <span class="kr">boolean</span><span class="o">|</span><span class="nx">string</span><span class="p">,</span>
  <span class="c1">// If `true` a new async commons chunk is created as child of `options.name` and sibling of `options.chunks`.</span>
  <span class="c1">// It is loaded in parallel with `options.chunks`.</span>
  <span class="c1">// Instead of using `option.filename`, it is possible to change the name of the output file by providing</span>
  <span class="c1">// the desired string here instead of `true`.</span>

  <span class="nx">minSize</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span>
  <span class="c1">// Minimum size of all common module before a commons chunk is created.</span>
<span class="p">}</span>
</pre></div>

<p>T&gt; The deprecated webpack 1 constructor <code>new webpack.optimize.CommonsChunkPlugin(options, filenameTemplate, selectedChunks, minChunks)</code> is no longer supported. Use a corresponding options object instead.</p>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<h3 id="commons-chunk-for-entries">Commons chunk for entries<a class="headerlink" href="#commons-chunk-for-entries" title="Permanent link">&para;</a></h3>
<p>Generate an extra chunk, which contains common modules shared between entry points.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;commons&#39;</span><span class="p">,</span>
  <span class="c1">// (the commons chunk name)</span>

  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;commons.js&#39;</span><span class="p">,</span>
  <span class="c1">// (the filename of the commons chunk)</span>

  <span class="c1">// minChunks: 3,</span>
  <span class="c1">// (Modules must be shared between 3 entries)</span>

  <span class="c1">// chunks: [&quot;pageA&quot;, &quot;pageB&quot;],</span>
  <span class="c1">// (Only use these entries)</span>
<span class="p">});</span>
</pre></div>

<p>You must load the generated chunk before the entry point:</p>
<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;commons.js&quot;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;entry.bundle.js&quot;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>

<h3 id="explicit-vendor-chunk">Explicit vendor chunk<a class="headerlink" href="#explicit-vendor-chunk" title="Permanent link">&para;</a></h3>
<p>Split your code into vendor and application.</p>
<div class="codehilite"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">//...</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">vendor</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span> <span class="s1">&#39;other-lib&#39;</span><span class="p">],</span>
    <span class="nx">app</span><span class="o">:</span> <span class="s1">&#39;./entry&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vendor&#39;</span><span class="p">,</span>
      <span class="c1">// filename: &quot;vendor.js&quot;</span>
      <span class="c1">// (Give the chunk a different name)</span>

      <span class="nx">minChunks</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
      <span class="c1">// (with more entries, this ensures that no other module</span>
      <span class="c1">//  goes into the vendor chunk)</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">};</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;vendor.js&quot;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;app.js&quot;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>

<p>T&gt; In combination with long term caching you may need to use the <a href="https://github.com/soundcloud/chunk-manifest-webpack-plugin"><code>ChunkManifestWebpackPlugin</code></a> to avoid the vendor chunk changes. You should also use records to ensure stable module ids, e.g. using <code>NamedModulesPlugin</code> or <a href="/plugins/hashed-module-ids-plugin"><code>HashedModuleIdsPlugin</code></a>.</p>
<h3 id="move-common-modules-into-the-parent-chunk">Move common modules into the parent chunk<a class="headerlink" href="#move-common-modules-into-the-parent-chunk" title="Permanent link">&para;</a></h3>
<p>With <a href="/guides/code-splitting">Code Splitting</a>, multiple child chunks of an entry chunk can have common dependencies. To prevent duplication these can be moved into the parent. This reduces overall size, but does have a negative effect on the initial load time. If it is expected that users will need to download many sibling chunks, i.e. children of the entry chunk, then this should improve load time overall.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="c1">// names: [&quot;app&quot;, &quot;subPageA&quot;]</span>
  <span class="c1">// (choose the chunks, or omit for all chunks)</span>

  <span class="nx">children</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">// (select all children of chosen chunks)</span>

  <span class="c1">// minChunks: 3,</span>
  <span class="c1">// (3 children must share the module before it&#39;s moved)</span>
<span class="p">});</span>
</pre></div>

<h3 id="extra-async-commons-chunk">Extra async commons chunk<a class="headerlink" href="#extra-async-commons-chunk" title="Permanent link">&para;</a></h3>
<p>Similar to the above one, but instead of moving common modules into the parent (which increases initial load time) a new async-loaded additional commons chunk is used. This is automatically downloaded in parallel when the additional chunk is downloaded.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;app&#39;</span><span class="p">,</span>
  <span class="c1">// or</span>
  <span class="nx">names</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="s1">&#39;subPageA&#39;</span><span class="p">],</span>
  <span class="c1">// the name or list of names must match the name or names</span>
  <span class="c1">// of the entry points that create the async chunks</span>

  <span class="nx">children</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">// (use all children of the chunk)</span>

  <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">// (create an async commons chunk)</span>

  <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="c1">// (3 children must share the module before it&#39;s separated)</span>
<span class="p">});</span>
</pre></div>

<h3 id="passing-the-minchunks-property-a-function">Passing the <code>minChunks</code> property a function<a class="headerlink" href="#passing-the-minchunks-property-a-function" title="Permanent link">&para;</a></h3>
<p>You also have the ability to pass the <code>minChunks</code> property a function. This function is called by the <code>CommonsChunkPlugin</code> and calls the function with <code>module</code> and <code>count</code> arguments.</p>
<p>The <code>module</code> argument represents each module in the chunks you have provided via the <code>name</code>/<code>names</code> property.
<code>module</code> has the shape of a <a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js">NormalModule</a>, which has two particularly useful properties for this use case:</p>
<ul>
<li><code>module.context</code>: The directory that stores the file. For example: <code>'/my_project/node_modules/example-dependency'</code></li>
<li><code>module.resource</code>: The name of the file being processed. For example: <code>'/my_project/node_modules/example-dependency/index.js'</code></li>
</ul>
<p>The <code>count</code> argument represents how many chunks the <code>module</code> is used in.</p>
<p>This option is useful when you want to have fine-grained control over how the CommonsChunk algorithm determines where modules should be moved to.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;my-single-lib-chunk&#39;</span><span class="p">,</span>
  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;my-single-lib-chunk.js&#39;</span><span class="p">,</span>
  <span class="nx">minChunks</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// If module has a path, and inside of the path exists the name &quot;somelib&quot;,</span>
    <span class="c1">// and it is used in 3 separate chunks/entries, then break it out into</span>
    <span class="c1">// a separate chunk with chunk keyname &quot;my-single-lib-chunk&quot;, and filename &quot;my-single-lib-chunk.js&quot;</span>
    <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">resource</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/somelib/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">count</span> <span class="o">===</span> <span class="mi">3</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>As seen above, this example allows you to move only one lib to a separate file if and only if all conditions are met inside the function.</p>
<p>This concept may be used to obtain implicit common vendor chunks:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vendor&#39;</span><span class="p">,</span>
  <span class="nx">minChunks</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this assumes your vendor imports exist in the node_modules directory</span>
    <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;node_modules&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>In order to obtain a single CSS file containing your application and vendor CSS, use the following <code>minChunks</code> function together with <a href="/plugins/extract-text-webpack-plugin/"><code>ExtractTextPlugin</code></a>:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vendor&#39;</span><span class="p">,</span>
  <span class="nx">minChunks</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">module</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// This prevents stylesheet resources with the .css or .scss extension</span>
    <span class="c1">// from being moved from their original chunk to the vendor chunk</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">resource</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/^.*\.(css|scss)$/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">resource</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;node_modules&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h2 id="manifest-file">Manifest file<a class="headerlink" href="#manifest-file" title="Permanent link">&para;</a></h2>
<p>To extract the webpack bootstrap logic into a separate file, use the <code>CommonsChunkPlugin</code> on a <code>name</code> which is not defined as <code>entry</code>. Commonly the name <code>manifest</code> is used. See the <a href="/guides/caching">caching guide</a> for details.</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;manifest&#39;</span><span class="p">,</span>
  <span class="nx">minChunks</span><span class="o">:</span> <span class="kc">Infinity</span>
<span class="p">});</span>
</pre></div>

<h2 id="combining-implicit-common-vendor-chunks-and-manifest-file">Combining implicit common vendor chunks and manifest file<a class="headerlink" href="#combining-implicit-common-vendor-chunks-and-manifest-file" title="Permanent link">&para;</a></h2>
<p>Since the <code>vendor</code> and <code>manifest</code> chunk use a different definition for <code>minChunks</code>, you need to invoke the plugin twice:</p>
<div class="codehilite"><pre><span></span><span class="p">[</span>
  <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vendor&#39;</span><span class="p">,</span>
    <span class="nx">minChunks</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;node_modules&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}),</span>
  <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">optimize</span><span class="p">.</span><span class="nx">CommonsChunkPlugin</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;manifest&#39;</span><span class="p">,</span>
    <span class="nx">minChunks</span><span class="o">:</span> <span class="kc">Infinity</span>
  <span class="p">}),</span>
<span class="p">];</span>
</pre></div>

<h2 id="more-examples">More Examples<a class="headerlink" href="#more-examples" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/webpack/webpack/tree/master/examples/common-chunk-and-vendor-chunk">Common and Vendor Chunks</a></li>
<li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-commons-chunks">Multiple Common Chunks</a></li>
<li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-entry-points-commons-chunk-css-bundle">Multiple Entry Points with Commons Chunk</a></li>
</ul></article></div></div></main><footer class="md-footer"><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright">powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div></div></div></footer></div><script src="../../../assets/javascripts/application.d5a09f94.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script></body></html>